---
title: 170516-TPS54331 Debug
toc: true
date: 2017-05-16 13:05:08
categories:
tags: 
- TPS54331
---

# 背景
一个项目中用到了TPS54331电源芯片，电源输入电压5V，输出4V，负载GPRS模块。

# 问题
上电后设备无法正常工作，输出波形2s周期三角波，最低电压2V，最高电压4V。增大输入电压后工作正常；或者增大输出电流后也正常。故障现象具有普遍性，所有设备都存在相同问题。

# 问题解决
根据故障现象和查阅手册可知，因为GPRS模块的电流时突变的，最低时只有几十毫安，峰值却能达到1安。所以问题出现在几十毫安，查电源芯片数据手册可知，负载电流较小时，电源芯片将进入ECO模式【当电感上最大电流小于160mA时，设备进入ECO模式】。  
问题就发生在ECO模式，为了提高效率在负载较小时，会进入ECO模式，降低开关频率。ECO模式下要维持设备正常工作，要求输入关断期间，输出电感上电流不能间断，因此要求输出电感较大。  
然而实际调试过程中，即便将输出电感增加到100uH，也要输入电压5.5V才能正常工作。进一步测试发现，当减小输出电容时(GPRS模块数据手册要求输入电容470uF x 2，电路设计中为470uFx2，20uF*2)，输出三角波的频率会增加。进一步减小电容（拆除470uFx2）后，输出更趋于良好。增加一个120Ω负载后，输出正常。

# 问题分析
1. 输入电压7V，输出4V工作正常，输出电容不变；  
2. 输入5V，输出电容减少，增加负载，输出4V工作正常。  
原因：输入-输出压差小于2V时，芯片监测BOOT管脚的电压作为欠压保护输入。因此需要保持电感器上电流不能为0。当输入输出压差大于2V时，输入欠压用输入分压后由EN监测实现。

# 总结
不能完全相信数据手册。

